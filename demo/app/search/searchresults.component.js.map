{"version":3,"file":"searchresults.component.js","sourceRoot":"","sources":["searchresults.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit,ViewChild} from 'angular2/core';\r\nimport { ROUTER_DIRECTIVES,Router, RouteParams } from 'angular2/router';\r\nimport {BrowserDomAdapter} from 'angular2/platform/browser';\r\nimport { HTTP_PROVIDERS } from 'angular2/http';\r\n\r\nimport { RangeSelectorComponent } from '../shared/rangeslider/rangeselector.component';\r\nimport { SearchService } from './search.service';\r\nimport { SearchFormComponent } from './searchform.component';\r\n\r\nimport { Search } from './model/search';\r\n\r\nimport { DayofWeek } from '../pipes/dayofweek';\r\nimport { ExtractTime } from '../pipes/extracttime';\r\nimport { DayAndMonth } from '../pipes/dayandmonth';\r\nimport { DayMonthYear } from '../pipes/daymonthyear';\r\n\r\n@Component({\r\n  selector: 'search-reults-page',\r\n  templateUrl: './app/search/searchresults.component.html',\r\n  directives: [ROUTER_DIRECTIVES,RangeSelectorComponent,SearchFormComponent],\r\n  pipes:[ExtractTime,DayofWeek,DayAndMonth,DayMonthYear],\r\n  providers: [\r\n    SearchService,\r\n    HTTP_PROVIDERS\r\n  ]\r\n})\r\n\r\nexport class SearchResultsComponent {\r\n\r\n  errorMessage: string;\r\n  tripData: any;\r\n  carrier: any[];\r\n  aircraft: any[];\r\n  count: number; \r\n  filterCount : number;\r\n  filtered : any = [];\r\n  visible: boolean = true;\r\n  dom:BrowserDomAdapter;\r\n  \r\n  minPrice: number;\r\n  maxPrice: number;\r\n  \r\n  searchFormVisible: boolean = true;\r\n  \r\n  searchFormData: any = {};\r\n  \r\n  @ViewChild(SearchFormComponent) searchForm:SearchFormComponent;\r\n  \r\n  priceSortByDisplay : string;\r\n  priceSortBySelValue : number = 0;\r\n\r\n  searchResultsVisible : boolean = false;\r\n  loadingMsg : boolean = false;\r\n  serverError : boolean = true;\r\n  serverErrorMsg : string; \r\n  \r\n  orginalResult: any;\r\n  currency: string;\r\n\r\n  constructor(\r\n\t\tprivate _searchService: SearchService,\r\n\t\tprivate _routeParams: RouteParams\r\n  ) {\r\n      this.dom = new BrowserDomAdapter();\r\n  }\r\n\r\n  ngOnInit() { \r\n  \r\n    this.searchFormData.from = this._routeParams.get('from');\r\n\tthis.searchFormData.to = this._routeParams.get('to');\r\n\tthis.searchFormData.departDate = this._routeParams.get('departDate');\r\n\tthis.searchFormData.maxPrice = this._routeParams.get('maxPrice');\r\n\tthis.searchFormData.adult = this._routeParams.get('adult');\r\n\tthis.searchFormData.children = this._routeParams.get('children');\r\n\tthis.searchFormData.infants = this._routeParams.get('infants');\r\n\t\r\n\tthis.searchResultsVisible = true; \r\n\r\n    this.getFlights(this.searchFormData.from,this.searchFormData.to,this.searchFormData.departDate,this.searchFormData.maxPrice,this.searchFormData.adult,this.searchFormData.children,this.searchFormData.infants); \r\n\r\n  }\r\n\r\n  getFlights(from,to,departDate,maxPrice,adult,children,infants) {\r\n    this._searchService.getFlightSearchResults(from,to,departDate,maxPrice,adult,children,infants)\r\n      .subscribe(\r\n        searchResults=> {\r\n\t\t\r\n            this.tripData\t= searchResults.trips.data;\t\t\r\n\t\t\tthis.carrier  = searchResults.trips.data.carrier; \r\n\t\t\tthis.aircraft = searchResults.trips.data.aircraft;\r\n\t\t    //console.log(searchResults.trips);\r\n\t\t\tthis.filterTripsFields(searchResults.trips.tripOption);\r\n           \r\n            //console.log(this.filtered);\r\n                 \r\n\t\t\tthis.searchResultsVisible = false;  \r\n\t\t\tthis.loadingMsg = true;\r\n\t\t\t\r\n\t\t\t},\r\n        error => {\r\n           this.errorMessage = <any>error\r\n            console.log(error.message); \r\n            if(error.message){\r\n                 this.serverError = false; \r\n                 this.serverErrorMsg  = error.message;\r\n                 \tthis.searchForm.setSearchModel(this.searchFormData.from,this.searchFormData.to,this.searchFormData.departDate,this.searchFormData.maxPrice,this.searchFormData.adult,this.searchFormData.children,this.searchFormData.infants);  \r\n\r\n\r\n            }\r\n\r\n        } \r\n    );\r\n  }\r\n  filterTripsFields(options){\r\n    \r\n    options.forEach((tripOption,index )=>{\r\n\t\t\r\n\r\n\r\n\t\tvar trip: any = {};\r\n\r\n\t\tvar legs : any[] = [];\r\n\t\tvar carrierCode: any ={};\r\n\t\tvar stops : any[] = [];\r\n\t\t\r\n\t\ttrip.saleTotal = tripOption['saleTotal'];\r\n\r\n\t\ttrip.duration = tripOption['slice'][0]['duration'];\r\n\t\ttrip.durationDisplay = this.minutesToHours(tripOption['slice'][0]['duration']);\r\n\t\t\r\n\t\ttripOption.slice[0].segment.forEach((seg,segindex,array) =>{\r\n\t\t   \r\n\t\t\tcarrierCode[seg.flight.carrier]=\"\"; \r\n\t\t\t\r\n\t\t\t let totalDuration = 0; \r\n\r\n\t\t\t seg.leg.forEach((l,legindex,legarray) =>{\r\n\r\n\t\t\t    \r\n\t\t\t     var leg: any ={};\t\t\r\n\r\n\t\t\t\t leg.airCraft =   this.getAircraftName(l.aircraft)[0]['name'];\r\n\t\t\t\t leg.carrierName =   this.getCarrierName(seg.flight.carrier)[0]['name'];\r\n\t\t\t\t leg.arrivalTime =   l.arrivalTime;\r\n\t\t\t\t leg.departureTime =   l.departureTime;\r\n\t\t\t\t leg.origin =   l.origin;\r\n\t\t\t\t leg.destination =   l.destination;\r\n\t\t\t\t leg.duration =   l.duration;\r\n\t\t\t\t leg.durationDisplay  =  this.minutesToHours(l.duration);\r\n\t\t\t\r\n\r\n\t\t\t     stops.push(l.destination);\r\n                   \r\n\r\n\t\t\t\t legs.push(leg);\r\n\r\n\t\t\t\t  \r\n\t\t\t });\r\n\t\t\t \r\n\t\t})\r\n\t\ttrip.carrierCode = carrierCode;\r\n\t\ttrip.legs = legs;\r\n       \r\n\t    switch(Object.keys(trip.carrierCode).length){\t\r\n\t\t  case 1:\r\n\t\t     trip.carrierName = this.getCarrierName(Object.keys(trip.carrierCode)[0])[0].name;\r\n\t\t     break;\r\n\t\t  default:\r\n\t\t    trip.carrierName = \"Multiple Airlines\";\r\n\t\t   break;\r\n\t\t}\r\n\t\t stops.pop(); // removed the last final destination\r\n\t\t trip.stopsCount = stops.length;\r\n         trip.stops = stops.join(','); \t\r\n         trip.origin = this.getOrgin(options[0]['slice'][0]['segment']);\r\n         trip.destination = this.getDestination(options[0]['slice'][0]['segment']);\t \r\n\r\n\t\t this.filtered.push(trip);\r\n\t\t\r\n\t});\r\n\t\r\n\tthis.priceSortBy('');\r\n\t\r\n\tthis.orginalResult = this.filtered.slice(0);\r\n\t\r\n\tthis.currency = this.filtered[0].saleTotal.match(/[^0-9\\.]+/g);\r\n\tthis.minPrice = parseInt(this.filtered[0].saleTotal.match(/\\d+/g));\r\n\tthis.maxPrice = parseInt(this.filtered[this.filtered.length-1].saleTotal.match(/\\d+/g));\r\n\r\n\tthis.count = this.filtered.length;  \r\n\tthis.filterCount = this.filtered.length;\r\n\tthis.searchForm.setSearchModel(this.searchFormData.from,this.searchFormData.to,this.searchFormData.departDate,this.searchFormData.maxPrice,this.searchFormData.adult,this.searchFormData.children,this.searchFormData.infants);\r\n\t\r\n\t\r\n\t\r\n  }\r\n  getCarrierName(code){\r\n    return this.carrier.filter(obj =>{\r\n\t\treturn obj.code == code;\r\n\t});\r\n\r\n  }\r\n  getAircraftName(code){\r\n\treturn this.aircraft.filter(obj =>{\r\n\t\treturn obj.code == code;\r\n\t});\r\n  }\r\n  minutesToHours(minutes: number){\r\n\t let sign ='';  \r\n\t if(minutes < 0){  \r\n\t  sign = '-';  \r\n\t }  \r\n\t \r\n\tlet leftPad = function(number) {    \r\n\t\t\treturn ((number < 10 && number >= 0) ? '' : '') + number;  \r\n\t} \r\n  \r\n\t let hours   = Math.floor(Math.abs(minutes) / 60);  \r\n\t let mins = leftPad(Math.abs(minutes) % 60);  \r\n\t  \r\n\t return sign + hours +'h '+mins + 'm';  \r\n    \r\n   }\r\n   getOrgin(seg){\r\n\t\treturn {\"airport\":seg[0]['leg'][0]['origin'],\"date\":seg[0]['leg'][0]['departureTime']}\r\n   }\r\n   getDestination(seg){\r\n     let lastSeg = seg.length -1;\r\n\t let lastLegInLastSeg = seg[lastSeg]['leg'].length -1;\r\n\r\n\t return {\r\n\t\"airport\":seg[lastSeg]['leg'][lastLegInLastSeg]['destination'],\"date\":seg[lastSeg]['leg'][lastLegInLastSeg]['arrivalTime']}\r\n   }\r\n   toggle(e){\r\n   \r\n      e.preventDefault();\r\n\t  \t  \r\n\t  var fightdetails = this.dom.querySelector(e.target.parentNode.parentNode.parentNode,\".flight-details\");\r\n\t  \t  \r\n\t  if(fightdetails.style.display == 'none' || fightdetails.style.display==''){\r\n\t    fightdetails.style.display=\"block\";\r\n\t  }\r\n\t  else{\r\n\t    fightdetails.style.display=\"none\"\r\n\t  }\r\n   }\r\n   changed(rangeValue: any) {\r\n    if (rangeValue) {\r\n      //console.log(rangeValue.srcElement.value);\r\n\t  \r\n\t   let copyArray = this.orginalResult.slice(0);\r\n \r\n\t   let rangeFiltered = copyArray.filter(function(price){\r\n\t      let saleTotal = price.saleTotal;\r\n\t      return parseInt(saleTotal.match(/\\d+/g)) <=  parseInt(rangeValue.srcElement.value);\r\n\t   });\r\n\t   \r\n\t   this.filtered = rangeFiltered.slice(0);\r\n\t   this.filterCount = this.filtered.length;\r\n\t   \r\n\t   this.priceSortBy(''); \r\n\r\n\t  \r\n    }\r\n  }\r\n  priceSortBy(flag){\r\n    \r\n\tif(flag==true){\r\n\t   this.priceSortBySelValue = (this.priceSortBySelValue==0) ? 1 : 0; \r\n    }\r\n\t\r\n    if(this.priceSortBySelValue==0 || flag=='asc'){\r\n\t\r\n\t    this.filtered = this.filtered.sort(function(a, b){\r\n\t\t   let comp1 =  a.saleTotal; \r\n\t\t   let comp2 =  b.saleTotal; \r\n          \r\n\t\t   return parseInt(comp1.match(/\\d+/g))-parseInt(comp2.match(/\\d+/g));\r\n\t\t}); \r\n\t\t\r\n\t\tthis.priceSortByDisplay = \"Low to High\";\r\n\t}\r\n\telse if(this.priceSortBySelValue==1 ||flag=='dec'){\r\n\t    \r\n       \r\n\t     this.filtered = this.filtered.sort(function(a, b){\r\n\t\t   let comp1 =  a.saleTotal; \r\n\t\t   let comp2 =  b.saleTotal; \r\n\t\t  \r\n\t\t   return parseInt(comp2.match(/\\d+/g))-parseInt(comp1.match(/\\d+/g));\r\n\t\t}); \r\n\t\t\r\n\t\tthis.priceSortByDisplay = \"High to Low\";\r\n\r\n\t}\r\n  }\r\n  \r\n  filterByAirline(carrier){\r\n  \r\n    //console.log(carrier);\r\n\r\n    let selected =  carrier.filter((item)=>{\r\n\t\treturn item.selected; \r\n\t}).map(item =>{\r\n\t\treturn item.code;\r\n\t});\r\n\t\r\n\t//console.log(selected);\r\n  }\r\n  toggleSearchform(){\r\n\t this.searchFormVisible = !this.searchFormVisible;\r\n  }\r\n\r\n}"]}